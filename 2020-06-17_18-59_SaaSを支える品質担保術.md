# SaaSを支える品質担保術

## NodeJsのバージョンアップ
### チャットディーラー
* サイトにスクリプトを仕込みチャットボットで自動応答させる
### 泥臭い作業
* アナログ作業が多かった
* バージョンの変更確認
  * Node.jsの変更差分確認
  * 依存パッケージの変更差分確認
* 全機能テストを複数回実施
### トラブル発生
* 動作遅延発生
* CPU使用率が100%
  * 並列処理の際に利用される機能
* Node.jsはシングルスレッド？libuvの中でマルチスレッドで実行される
  * ファイルI/O, Cryptoの場合にマルチスレッドで動く
* 管理サーバーから投げたSQLが原因でDBサーバーが遅延
* 同一処理内でファイル書き込みとDBを利用する箇所があった
* CPU使用率は待ち状態でも使用中と認識される。

* VersionUpは短いスパンでやるのがベター

## ArchUnitを用いたアーキテクチャ
* ソースコードのレビューはできるが、アーキテクチャのレビューは属人化
* ArchUnit: Javaで書かれたJUnitのテストコードフレームワーク
### ArchUnit
* メリット
  * アプリケーション固有の実装ルールがコード化されていることで、アーキテクチャレベルの適用度のテストができる
* レイヤーアーキテクチャ
  * UI -> アプリケーション -> ドメイン -> インフラ層で依存関係のルール定義
* パッケージ間・クラス間の依存関係
* ドメイン層を独立させよう
  * 
* Commonパッケージの依存
* アプリケーションの実装ルールをコードアーキテクチャ化

## CybouzのFrontend QA
* 平野さん、Node.js
### 