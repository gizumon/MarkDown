# トレンドNoSQL系データベース比較
周囲で名前の聞くことが多かった以下のサービスについて調査。
* elasticsearch
* Azure IoT hub
* Firebase realtime database

## elasticsearchの調査

### 概要
* Realtime検索・解析エンジンOSS
* Restインターフェースを持つ
* 膨大なデータから関連性のあるデータを素早く取り出す。またスケールアウトなどに対応。
* 傾向分析や地図データとの連携、過去データからの分析などを実施。
* SaaS、オンプレミスなど様々な環境にデプロイ可能
* Elastic Stackのパッケージに一連の必要機能が含まれる
  * Kibana: 可視化・管理
  * elasticsearch: データの格納・検索・分析
  * beats: データ投入ツール
  * logstash: データ投入ツール

### 事例
* Uberの配車検索に使用される。膨大なデータから検索スピードが求められるケースで活用

### サンプルお試し
* [公式](https://www.elastic.co/jp/blog/releasing-beta-version-of-elastic-docker-images)のdockerイメージを使用して、サンプルをお試し。
* RDBよりも堅牢ではないものの、簡単にデータの挿入ができ水平方向のスケールアウトにより検索速度などが高い模様。
* ログの解析やIoTデータの探索など、多くのデータから何かデータ処理などをする場合に有効と思われる。
* Restfulなインターフェースを持つため、多様なアプリケーションとの連携が容易。

## Azure IoT hubの調査

### 概要
* IoTデバイス間のデータ送受信ハブ
* データの送受信やデバイス間でのイベント連携などに活用できそう

### 事例
* ロボットの稼働状況ログ集積・管理に利用
  * ログを集積し、故障や稼働状況などを一元的に管理するニーズを満たす

## Firebase realtime databaseの調査

### 概要
* リアルタイムのNoSQLデータベース
* NoSQLなため、リレーションなどを張るケースや堅牢なシステム作成には不向き。
* 双方向の通信とSDK経由のリアルタイム検知が可能なため、変更を検知して即反映することが可能。
* またオフライン操作にも対応しているため、ネットワークの一時的な接続不良などでもエラー発生がしにく。一方でデータの堅牢性を保つことが難しく基本あと勝ちルールで更新されてしまう。
* アクセス制御などは、基本単純なルールのみ設定可能。READとWRITEに対してルールを適用可能。

### 事例
* WebRTCビデオ通話アプリケーションにおける通話ステータスの管理に利用
  * 各オペレータ間で通話ステータスを共有し、ステータス変更の検知するニーズを満たす
* ロボットカフェの機体管理サービスにおけるステータス管理に利用
  * 機体のリアルタイムなステータス管理や、故障時のアラート通知などのニーズを満たす

# 比較まとめ
### Azure IoT hub
  * データソースが複数あり、端末管理などが必要なケースや、デバイスのイベントを検知したアクション実行をしたいケースに有効

### elasticsearch
  * 膨大なデータから素早く検索や処理などの結果を求めらるケースで有効
  * Kibanaなど可視化ツールも充実しておりサービスも分割して管理可能

### Firebase realtime database
  * リアルタイム性が求められるサービスにおける双方向のメッセージ検知・管理したいケースに有効
  * データの変更履歴を残したり、ログを残したりなどに不向き。単純なマルチデバイス間スでのテータス管理などに有効。